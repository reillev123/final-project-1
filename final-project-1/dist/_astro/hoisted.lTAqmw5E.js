import"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js";import"https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js";import"./SocialMediaIcons.astro_astro_type_script_index_0_lang.Bx-rmOrY.js";const p="pastries,cakes,bread";async function d(t=p){return(await(await fetch(`https://api.edamam.com/api/recipes/v2?type=public&beta=true&q=${t}&app_id=d7193a6c&app_key=c9b8ee8a1b8166ef57bc491438a36768&dishType=Desserts`)).json()).hits}function u(t){for(let i=t.length-1;i>0;i--){const e=Math.floor(Math.random()*(i+1));[t[i],t[e]]=[t[e],t[i]]}return t}async function f(){const t=document.getElementById("spinner"),i=document.getElementById("recipe-container");t.style.display="block",i.style.display="none";try{const e=await d(),n=u(e).slice(0,9);m(n)}catch(e){console.error("Error fetching recipes:",e)}finally{t.style.display="none",i.style.display="flex"}}function m(t){const i=document.getElementById("recipe-container");i.innerHTML="",t.forEach(e=>{const n=document.createElement("div");n.className="col-md-4 mb-4",n.innerHTML=`
                <div class="card">
                    <img src="${e.recipe.image}" class="card-img-top" alt="${e.recipe.label}">
                    <div class="card-body">
                        <h5 class="card-title">${e.recipe.label}</h5>
                        <a href="/final-project-1/recipe-details?uri=${encodeURIComponent(e.recipe.uri)}" class="btn btn-primary mt-2 view-recipe-btn">View Recipe</a>
                        <button class="btn btn-outline-primary mt-2 favourite-btn">
                            <i class="fa-regular fa-heart"></i>
                        </button>
                    </div>
                </div>
            `,i.appendChild(n)}),document.querySelectorAll(".favourite-btn").forEach(e=>{e.addEventListener("click",function(n){n.preventDefault();const c=this.querySelector("i"),r=c.classList.contains("fa-solid");c.classList.toggle("fa-regular",r),c.classList.toggle("fa-solid",!r);const o=this.previousElementSibling.href.split("=")[1],l=t.find(a=>encodeURIComponent(a.recipe.uri)===o);let s=JSON.parse(localStorage.getItem("favourites"))||[];r?s=s.filter(a=>a.uri!==l.recipe.uri):s.push(l.recipe),localStorage.setItem("favourites",JSON.stringify(s))})}),document.querySelectorAll(".view-recipe-btn").forEach(e=>{e.addEventListener("click",function(n){const c=this.href.split("=")[1],r=t.find(o=>encodeURIComponent(o.recipe.uri)===c);localStorage.setItem("currentRecipe",JSON.stringify(r.recipe))})})}document.addEventListener("DOMContentLoaded",()=>{f()});
