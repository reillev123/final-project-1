---
import Layouts from "../layouts/Layouts.astro"
---
<Layouts>
    <!-- Page title -->
    <title>Recipe Details</title>
    <!-- Container for recipe details -->
    <div class="recipe-details">
        <!-- Image element for the recipe -->
        <img id="recipe-image" class="recipe-image" alt="Recipe Image">
        <!-- Container for recipe information -->
        <div class="recipe-info">
            <!-- Recipe title -->
            <h1 id="recipe-title"></h1>
            <!-- Recipe instructions -->
            <p id="recipe-instructions"></p>
            <!-- Ingredients header -->
            <h2>Ingredients</h2>
            <!-- List to display ingredients -->
            <ul id="ingredient-list" class="ingredient-list"></ul>
        </div>
    </div>

    <script>
        // Add an event listener to execute when the DOM is fully loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Retrieve the current recipe from localStorage
            const recipe = JSON.parse(localStorage.getItem('currentRecipe'));
            if (recipe) {
                // Set the recipe title
                document.getElementById('recipe-title').innerText = recipe.label;
                // Set the recipe image
                (document.getElementById('recipe-image') as HTMLImageElement).src = recipe.image;

                // Get the ingredient list element
                const ingredientList = document.getElementById('ingredient-list');
                // Iterate over the ingredient lines and add them to the list
                recipe.ingredientLines.forEach(ingredient => {
                    // Create a new list item for each ingredient
                    const listItem = document.createElement('li');
                    listItem.innerText = ingredient; // Set the text of the list item
                    ingredientList.appendChild(listItem); // Append the list item to the ingredient list
                });
            }
        });
    </script>
</Layouts>
